<p id="notice"><%= notice %></p>

<h2 class="ui dividing header"><%= @quiz.chapter.number %>: <%= @quiz.title %></h2>
<table class="ui definition table">
  <tbody>
      <tr>
        <td class="two wide column">Content</td>
        <td><%= markdown_render @quiz.content %></td>
      </tr>
      <% if can? :manage, Quiz %>
      <tr>
        <td>Reference</td>
        <td><%= markdown_render @quiz.reference %></td>
      </tr>
      <% end %>
  </tbody>
</table>

<!-- Buttons or Form -->
<% if can? :manage, Quiz %>
  <%= link_to edit_quiz_path(@quiz) do %>
    <div class="ui blue button">Edit</div>
  <% end %>
  <%= link_to chapter_path @quiz.chapter do %>
    <div class="ui basic button">Back to Chapter</div>
  <% end %>
  <%= link_to quizzes_path do %>
    <div class="ui basic button">Go to quizzes</div>
  <% end %>
<% elsif can? :show, Quiz %>
  <% if !@quiz.is_answer_repeat_by_user current_user.id %>
    <%= render 'answer_form' %>
  <% end %>
<% end %>

<h3 class="ui horizontal header divider">Logs</h3>

<!-- Laster Answer -->
<% if !@last_answer.nil? %>
  <h5 class="ui orange top attached header">
    Latest Answer
  </h5>
  <div class="ui bottom attached segment">
    <%= markdown_render @last_answer.content %>
    <p style="text-align:right;">
      <%= time_tag @last_answer.created_at %>
    </p>
  </div>
<% end %>

<!-- Answer Logs -->
<% @logs.each do | log | %>
  <h5 class="ui top attached header">
    Log #<%= log.id %> <%= puts_answer_label log %>
  </h5>
  <div class="ui attached segment">
    <%= markdown_render log.content %>
    <p style="text-align:right;">
      <%= time_tag log.created_at %>
    </p>
  </div>
  <div class="ui bottom attached segment">
    <%= markdown_render log.judgement.content %>
    <p style="text-align:right;">
      <em>—— <%= log.judgement.user.username %></em>
    </p>
  </div>
<% end %>
